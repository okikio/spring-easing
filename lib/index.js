(function(t,l){typeof exports=="object"&&typeof module<"u"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.SpringEasing={}))})(this,function(t){"use strict";function l(e){const n=parseFloat(e);return typeof n=="number"&&!Number.isNaN(n)}function p(e,n,i){return Math.min(Math.max(e,n),i)}function b(e,n,i){return n+(i-n)*e}function O(e,n){return Math.round(e*10**n)/10**n}function I(e){const n=parseFloat(e);return e.toString().replace(n.toString(),"")}function K(e){return function(n,i,r){return n.map(s=>e(s,i,r))}}/*!
 * Spring solver inspired by Webkit Copyright Â© 2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS''
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS
 * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 * THE POSSIBILITY OF SUCH DAMAGE.
*/const m=(e,[n=1,i=100,r=10,s=0]=[],o)=>{n=p(n,1e-4,1e3),i=p(i,1e-4,1e3),r=p(r,1e-4,1e3),s=p(s,1e-4,1e3);const g=Math.sqrt(i/n),a=r/(2*Math.sqrt(i*n)),c=a<1?g*Math.sqrt(1-a*a):0,f=a<1?(a*g+-s)/c:-s+g;let u=o?o*e/1e3:e;return a<1?u=Math.exp(-u*a*g)*(Math.cos(c*u)+f*Math.sin(c*u)):u=(1+f*u)*Math.exp(-u*g),1-u},F=new Map,E=1e5;function M([e,n,i,r]=[]){let s=[e,n,i,r],o=`${s}`;if(F.has(o))return F.get(o);const g=1/6;let a=0,c=0;for(;++c<E;){if(Math.abs(1-m(a,s))<.001){let u=a,D=1;for(;++c<E&&(a+=g,!(Math.abs(1-m(a,s))>=.001));)if(D++,D===16){const U=u*1e3;return F.set(o,[U,c]),[U,c]}}a+=g}const f=a*1e3;return F.set(o,[f,c]),[f,c]}function N(e){return(n,i=[],r)=>1-e(1-n,i,r)}function w(e){return function(n,i=[],r){return n<.5?e(n*2,i,r)/2:1-e(n*-2+2,i,r)/2}}function k(e){return function(n,i=[],r){return n<.5?(1-e(1-n*2,i,r))/2:(e(n*2-1,i,r)+1)/2}}const P=m,T=N(m),L=w(m),j=k(m);function d(e,n,i=3){const r=n.length-1,s=p(Math.floor(e*r),0,r-1),o=n[s],g=n[s+1],a=(e-s/r)*r;return O(b(a,o,g),i)}function y(e,n){const i=n.length-1;e=p(e,0,1);const r=Math.round(e*i);return n[r]}const G=y;function A(e,n,i=3){let r="";return l(n[0])&&(r=I(n[0])),d(e,n.map(s=>typeof s=="number"?s:parseFloat(s)),i)+r}function C(e,n,i=3){return n.every(o=>typeof o=="number")?d(e,n,i):n.every(o=>l(o))?A(e,n,i):y(e,n)}t.EasingFunctions={spring:m,"spring-in":P,"spring-out":T,"spring-in-out":L,"spring-out-in":j},t.EasingFunctionKeys=Object.keys(t.EasingFunctions);function z(e,n){t.EasingFunctions={...t.EasingFunctions,[e]:n},t.EasingFunctionKeys=Object.keys(t.EasingFunctions)}function B(e){t.EasingFunctions={...t.EasingFunctions,...e},t.EasingFunctionKeys=Object.keys(t.EasingFunctions)}function q(e){const n=/(\(|\s)([^)]+)\)?/.exec(e.toString());return n?n[2].split(",").map(i=>{let r=parseFloat(i);return Number.isNaN(r)?i.trim():r}):[]}function S(e={}){const n=typeof e=="string"||Array.isArray(e)&&typeof e[0]=="function";let{easing:i=[m,1,100,10,0],numPoints:r=38,decimal:s=3}=n?{easing:e}:e;if(typeof i=="string"){const o=t.EasingFunctions[i.replace(/(\(|\s).+/,"").toLowerCase().trim()],g=q(i);i=[o,...g]}return{easing:i,numPoints:r,decimal:s}}const h=new Map;function _(e={}){let{easing:n,numPoints:i}=S(e);if(Array.isArray(n)){if(typeof n[0]!="function")throw new Error("[spring-easing] A frame function is required as the first element in the easing array, e.g. [SpringFrame, ...]");n.length>1&&n.length<5&&console.warn(`[spring-easing] Be careful of only setting some of the spring parameters, you've only set ${5-n.length} spring parameter(s). The easing works best in the format: 
* "spring-out(mass, stiffness, damping, velocity)" or 
* [SpringOutFrame, mass, stiffness, damping, velocity].`),n.length>5&&console.warn(`[spring-easing] You entered ${5-n.length} more spring parameter(s) than necessary. The easing needs to be in the format: 
* "spring-out(mass, stiffness, damping, velocity)" or 
* [SpringOutFrame, mass, stiffness, damping, velocity].`)}else throw new Error(`[spring-easing] The easing needs to be in the format:  
* "spring-out(mass, stiffness, damping, velocity)" or 
* [SpringOutFrame, mass, stiffness, damping, velocity], the easing recieved is "${n}", [spring-easing] doesn't really know what to do with that.`);let[r,...s]=n;const[o,g=38]=M(s);i||(i=g);const a=`${s},${i}`;if(h.has(a)){let u=h.get(a);if(u.has(r))return u.get(r)}const c=[];for(let u=0;u<i;u++)c[u]=r(u/(i-1),s,o);const f=h.has(a)?h.get(a):new WeakMap;return f.set(r,[c,o]),h.set(a,f),[c,o]}function $(e,n={},i=C){const r=S(n),[s,o]=_(r);return[s.map(g=>i(g,e,r.decimal)),o]}t.EaseInOut=w,t.EaseOut=N,t.EaseOutIn=k,t.EasingDurationCache=F,t.EasingOptions=S,t.FramePtsCache=h,t.GenerateSpringFrames=_,t.INFINITE_LOOP_LIMIT=E,t.SpringEasing=$,t.SpringFrame=m,t.SpringInFrame=P,t.SpringInOutFrame=L,t.SpringOutFrame=T,t.SpringOutInFrame=j,t.default=$,t.getSpringDuration=M,t.getUnit=I,t.interpolateComplex=C,t.interpolateNumber=d,t.interpolateSequence=y,t.interpolateString=A,t.interpolateUsingIndex=G,t.isNumberLike=l,t.limit=p,t.parseEasingParameters=q,t.registerEasingFunction=z,t.registerEasingFunctions=B,t.scale=b,t.toAnimationFrames=K,t.toFixed=O,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
